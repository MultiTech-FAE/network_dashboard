{% extends "base.html" %}

{% block title %}Downlink{% endblock %}

{% block content %}
    <script src="{{ url_for('static', filename='js/downlinks.js') }}"></script>
    <h1>Configure Downlink</h1>
    <!-- Form for connecting to MQTT broker -->
    <form id="connectForm" onsubmit="connectToBroker(event)">
        <div class="form-group">
            <label for="broker">MQTT Broker IP:</label>
            <input type="text" id="broker" name="broker" required>
        </div>
        <div class="form-group">
            <label for="port">Port:</label>
            <input type="number" id="port" name="port" value="1883" required>
        </div>
        <div class="form-group">
            <label for="topic">Topic:</label>
            <input type="text" id="topic" name="topic" required>
        </div>
        <button type="submit">Connect</button>
    </form>


    <form id="downlinkForm" onsubmit="sendDownlink(event)">
        <h2>Configure Sensor</h2>
        <div class="form-group">
            <label for="downlinkTopic">Topic:</label>
            <input type="text" id="downlinkTopic" name="topic" required>
        </div>
        <div class="form-group">
            <label>Enable water present message:</label>
            <label><input type="radio" name="enable_water_present" value="1" required> Yes</label>
            <label><input type="radio" name="enable_water_present" value="0" required> No</label>
        </div>
        <div class="form-group">
            <label>Enable water not present message:</label>
            <label><input type="radio" name="enable_water_not_present" value="1" required> Yes</label>
            <label><input type="radio" name="enable_water_not_present" value="0" required> No</label>
        </div>
        <div class="form-group">
            <label for="threshold">Threshold of relative resistance between probes:</label>
            <input type="number" id="threshold" name="threshold" min="0" max="255" required>
        </div>
        <div class="form-group">
            <label for="restoral">Restoral margin in units of relative resistance between probes:</label>
            <input type="number" id="restoral" name="restoral" min="0" max="255" required>
        </div>
        <button type="submit">Submit</button>
    </form>
{% endblock %}
